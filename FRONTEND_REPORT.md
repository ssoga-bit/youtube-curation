# ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰æ§‹é€ ãƒ»UIæ©Ÿèƒ½ èª¿æŸ»ãƒ¬ãƒãƒ¼ãƒˆ

**ä½œæˆæ—¥:** 2026-02-22  
**ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ:** youtube-curation  
**èª¿æŸ»ç¯„å›²:** src/app, src/components

---

## 1. ãƒšãƒ¼ã‚¸æ§‹æˆ & ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°æ§‹é€ 

### 1.1 ãƒšãƒ¼ã‚¸éšå±¤

```
src/app/
â”œâ”€â”€ page.tsx                  # ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸ï¼ˆãƒ©ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ï¼‰
â”œâ”€â”€ videos/
â”‚   â”œâ”€â”€ page.tsx             # å‹•ç”»ä¸€è¦§ï¼ˆãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ãƒ»ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ä»˜ãï¼‰
â”‚   â”œâ”€â”€ [id]/
â”‚   â”‚   â””â”€â”€ page.tsx         # å‹•ç”»è©³ç´°ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼é€²æ—ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ï¼‰
â”‚   â””â”€â”€ loading.tsx          # ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ç”»é¢
â”œâ”€â”€ paths/
â”‚   â”œâ”€â”€ page.tsx             # å­¦ç¿’ãƒˆãƒ©ãƒƒã‚¯ä¸€è¦§
â”‚   â”œâ”€â”€ [id]/
â”‚   â”‚   â””â”€â”€ page.tsx         # ãƒˆãƒ©ãƒƒã‚¯è©³ç´°ï¼ˆã‚¹ãƒ†ãƒƒãƒ—ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ï¼‰
â”‚   â””â”€â”€ loading.tsx
â”œâ”€â”€ admin/
â”‚   â””â”€â”€ page.tsx             # ç®¡ç†è€…ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ï¼ˆ7ã‚¿ãƒ–ï¼‰
â”œâ”€â”€ auth/signin/
â”‚   â””â”€â”€ page.tsx             # ãƒ­ã‚°ã‚¤ãƒ³ãƒšãƒ¼ã‚¸ï¼ˆGoogle + ãƒ‡ãƒ¢èªè¨¼ï¼‰
â”œâ”€â”€ layout.tsx               # ãƒ«ãƒ¼ãƒˆãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
â”œâ”€â”€ error.tsx                # ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒ©
â”œâ”€â”€ loading.tsx              # ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°
â””â”€â”€ not-found.tsx            # 404ãƒšãƒ¼ã‚¸
```

### 1.2 ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ç‰¹æ€§

| ãƒšãƒ¼ã‚¸ | ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå‹ | ãƒ‡ãƒ¼ã‚¿å–å¾—æ–¹å¼ | ã‚¢ã‚¯ã‚»ã‚¹åˆ¶é™ |
|--------|------------------|----------------|------------|
| `/` | Server | Prisma (ç›´æ¥) | ãªã—ï¼ˆå…¬é–‹ï¼‰ |
| `/videos` | Client | API ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ | ãªã—ï¼ˆå…¬é–‹ï¼‰ |
| `/videos/[id]` | Client | API + useState | ãªã—ï¼ˆã‚²ã‚¹ãƒˆå¯èƒ½ï¼‰ |
| `/paths` | Server | Prisma (ç›´æ¥) | ãªã—ï¼ˆå…¬é–‹ï¼‰ |
| `/paths/[id]` | Server | Prisma (ç›´æ¥) | isPublished=true ã®ã¿ |
| `/admin` | Client | API + sessionæ¤œè¨¼ | admin ãƒ­ãƒ¼ãƒ«ã®ã¿ |
| `/auth/signin` | Client | next-auth | ã‚²ã‚¹ãƒˆã®ã¿ |

---

## 2. ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆæ§‹æˆ

### 2.1 ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

```
src/components/
â”œâ”€â”€ layout/
â”‚   â”œâ”€â”€ Header.tsx              # ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ + èªè¨¼UI
â”‚   â””â”€â”€ Header.test.tsx
â”œâ”€â”€ providers/
â”‚   â””â”€â”€ SessionProvider.tsx     # Next-Auth ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒ—ãƒ­ãƒã‚¤ãƒ€
â”œâ”€â”€ ui/                          # å†åˆ©ç”¨å¯èƒ½ãªUIéƒ¨å“
â”‚   â”œâ”€â”€ FilterSidebar.tsx       # å‹•ç”»ãƒ•ã‚£ãƒ«ã‚¿ï¼ˆãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ï¼‰
â”‚   â”œâ”€â”€ EmptyState.tsx          # ãƒ‡ãƒ¼ã‚¿ãªã—çŠ¶æ…‹
â”‚   â”œâ”€â”€ FilterSidebar.test.tsx
â”‚   â””â”€â”€ EmptyState.test.tsx
â”œâ”€â”€ video/                       # å‹•ç”»é–¢é€£ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”œâ”€â”€ VideoCard.tsx           # å‹•ç”»ã‚«ãƒ¼ãƒ‰ï¼ˆãƒ¡ãƒ¢åŒ–ï¼‰
â”‚   â”œâ”€â”€ VideoCard.test.tsx
â”‚   â”œâ”€â”€ BCIBadge.tsx            # Beginner Comfort Index ãƒãƒƒã‚¸
â”‚   â”œâ”€â”€ BCIBadge.test.tsx
â”‚   â””â”€â”€ FeedbackButton.tsx      # ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯é€ä¿¡ãƒœã‚¿ãƒ³
â”œâ”€â”€ path/                        # å­¦ç¿’ãƒˆãƒ©ãƒƒã‚¯é–¢é€£
â”‚   â”œâ”€â”€ PathCard.tsx            # ãƒˆãƒ©ãƒƒã‚¯ã‚«ãƒ¼ãƒ‰ï¼ˆãƒ¡ãƒ¢åŒ–ï¼‰
â”‚   â”œâ”€â”€ PathCard.test.tsx
â”‚   â””â”€â”€ StepTimeline.tsx        # ã‚¹ãƒ†ãƒƒãƒ—ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³
â””â”€â”€ admin/                       # ç®¡ç†è€…å°‚ç”¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
    â”œâ”€â”€ VideoTable.tsx          # å‹•ç”»ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆCRUDï¼‰
    â”œâ”€â”€ VideoTable.test.tsx
    â”œâ”€â”€ ImportForm.tsx          # YouTubeå‹•ç”»ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
    â”œâ”€â”€ BCISettings.tsx         # BCIè¨ˆç®—ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿èª¿æ•´
    â”œâ”€â”€ FeedbackList.tsx        # ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ä¸€è¦§
    â”œâ”€â”€ PathManager.tsx         # ãƒˆãƒ©ãƒƒã‚¯ CRUD
    â”œâ”€â”€ SummarizerSettings.tsx  # è¦ç´„AIè¨­å®š
    â”œâ”€â”€ UserManager.tsx         # ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†
    â”œâ”€â”€ SummarizeButton.tsx     # å€‹åˆ¥å‹•ç”»è¦ç´„å®Ÿè¡Œ
    â”œâ”€â”€ hooks/
    â”‚   â”œâ”€â”€ useImportForm.ts    # ã‚¤ãƒ³ãƒãƒ¼ãƒ å‡¦ç†ãƒ­ã‚¸ãƒƒã‚¯
    â”‚   â””â”€â”€ usePathManager.ts   # ãƒˆãƒ©ãƒƒã‚¯ç®¡ç†ãƒ­ã‚¸ãƒƒã‚¯
    â””â”€â”€ import/                  # ã‚¤ãƒ³ãƒãƒ¼ãƒˆ UI ãƒ‘ãƒ¼ãƒ„
        â”œâ”€â”€ UrlInput.tsx
        â”œâ”€â”€ MetaPreview.tsx
        â””â”€â”€ types.ts
```

### 2.2 ä¸»è¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆèª¬æ˜

#### åŸºç›¤å±¤
- **Header (layout/Header.tsx)**: ã‚¹ãƒ†ã‚£ãƒƒã‚­ãƒ¼ãƒ˜ãƒƒãƒ€ãƒ¼ã€èªè¨¼çŠ¶æ…‹ã«å¿œã˜ãŸè¡¨ç¤ºåˆ‡æ›¿ã€ãƒ¢ãƒã‚¤ãƒ«ãƒ¡ãƒ‹ãƒ¥ãƒ¼
- **SessionProvider**: Next-Auth ã‚’ ãƒ©ãƒƒãƒ—ã€å…¨ã‚¢ãƒ—ãƒªã§ useSession() ä½¿ç”¨å¯èƒ½
- **EmptyState (ui/EmptyState.tsx)**: çµ±ä¸€ã•ã‚ŒãŸã€Œãƒ‡ãƒ¼ã‚¿ãªã—ã€è¡¨ç¤ºï¼ˆã‚¢ã‚¤ã‚³ãƒ³ + ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼‰

#### å‹•ç”»é–¢é€£
- **VideoCard**: ãƒ¡ãƒ¢åŒ–æ¸ˆã¿ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã€YouTube ã‚µãƒ ãƒã‚¤ãƒ«å–å¾—ã€å‹•ç”»ãƒªãƒ³ã‚¯ç”Ÿæˆ
- **BCIBadge**: Beginner Comfort Index ã‚¹ã‚³ã‚¢è¡¨ç¤ºï¼ˆè‰²åˆ†ã‘ï¼‰
- **FeedbackButton**: ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯é€ä¿¡ãƒ•ã‚©ãƒ¼ãƒ ï¼ˆãƒ¢ãƒ¼ãƒ€ãƒ«ï¼Ÿï¼‰

#### å­¦ç¿’ãƒˆãƒ©ãƒƒã‚¯é–¢é€£
- **PathCard**: ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³èƒŒæ™¯ã€ã‚¹ãƒ†ãƒƒãƒ—æ•°ãƒ»æ‰€è¦æ™‚é–“è¡¨ç¤ºã€CTA
- **StepTimeline**: ãƒˆãƒ©ãƒƒã‚¯å†…ã®å‹•ç”»ã‚¹ãƒ†ãƒƒãƒ—ã‚’è¦–è¦šçš„ã«è¡¨ç¤º

#### ç®¡ç†ç”»é¢
- **VideoTable**: æ¤œç´¢ãƒ»ç·¨é›†ãƒ»å‰Šé™¤ãƒ»å…¬é–‹åˆ‡æ›¿ãƒ»è¦ç´„å®Ÿè¡Œï¼ˆã‚¤ãƒ³ãƒ©ã‚¤ãƒ³UIï¼‰
- **ImportForm + hooks**: URL å…¥åŠ› â†’ ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿å–å¾— â†’ ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ â†’ è¿½åŠ 
- **PathManager**: ãƒˆãƒ©ãƒƒã‚¯ CRUDã€ã‚¹ãƒ†ãƒƒãƒ—é †åºç®¡ç†
- **BCISettings, SummarizerSettings, FeedbackList, UserManager**: ãã‚Œãã‚Œåˆ¥ã‚¿ãƒ–ã§ç®¡ç†æ©Ÿèƒ½æä¾›

---

## 3. çŠ¶æ…‹ç®¡ç† & ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚§ãƒƒãƒãƒ‘ã‚¿ãƒ¼ãƒ³

### 3.1 ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆåˆ†é¡

| åˆ†é¡ | ç‰¹æ€§ | ä½¿ç”¨æŠ€è¡“ |
|------|------|---------|
| **Server Component** (page.tsx) | Next.js æ¨™æº–ã€Prisma ç›´æ¥ä½¿ç”¨ | Async + Promise.all() |
| **Client Component** (å‹•ç”»ä¸€è¦§ãªã©) | useState/useEffectã€URLåŒæœŸ | api-client (fetch) |
| **ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰** | Server page + Client components | Suspense + dynamic() |

### 3.2 ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚§ãƒƒãƒãƒ‘ã‚¿ãƒ¼ãƒ³

#### A. Server-Side Rendering (ãƒ›ãƒ¼ãƒ , ãƒ‘ã‚¹ä¸€è¦§, ãƒ‘ã‚¹è©³ç´°)
```typescript
// src/app/page.tsx
const [paths, shortVideos, newVideos] = await Promise.all([
  prisma.path.findMany(...),
  prisma.video.findMany(...),
  prisma.video.findMany(...),
]);
```
- **ç‰¹å¾´**: é™çš„ç”Ÿæˆã€Prisma ç›´æ¥åˆ©ç”¨ã€ã‚­ãƒ£ãƒƒã‚·ãƒ¥å¯èƒ½
- **ç”¨é€”**: ãƒ©ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ã€ãƒˆãƒ©ãƒƒã‚¯é–²è¦§ã€ãƒˆãƒ©ãƒƒã‚¯è©³ç´°

#### B. Client-Side with URLSync (å‹•ç”»ä¸€è¦§)
```typescript
// src/app/videos/page.tsx ("use client")
const [videos, setVideos] = useState<Video[]>([]);
useEffect(() => {
  const params = buildParams();
  router.replace(`/videos?${params}`, { scroll: false });
  api.get(`/api/videos?${params}`)...
}, [filters, page]);
```
- **ç‰¹å¾´**: 
  - çŠ¶æ…‹ â†” URL ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®åŒæ–¹å‘åŒæœŸ
  - ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³å¯¾å¿œ
  - ãƒ•ã‚£ãƒ«ã‚¿å¤‰æ›´æ™‚ã« page=1 ãƒªã‚»ãƒƒãƒˆ
  - 300ms ãƒ‡ãƒã‚¦ãƒ³ã‚¹æ¤œç´¢
- **ç”¨é€”**: ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã€æ¤œç´¢ã€ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³

#### C. Client-Side (å‹•ç”»è©³ç´°, ç®¡ç†ç”»é¢)
```typescript
// src/app/videos/[id]/page.tsx ("use client")
useEffect(() => {
  api.get(`/api/videos/${id}`).then(data => setVideo(data.video));
}, [id]);
```
- **ç‰¹å¾´**: å˜ç´”ãª API å‘¼ã³å‡ºã—ã€useState ã®ã¿
- **ç”¨é€”**: è©³ç´°è¡¨ç¤ºã€ç®¡ç†æ©Ÿèƒ½

### 3.3 APIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆè¨­è¨ˆ

```typescript
// src/lib/api-client.ts
export const api = {
  get: <T>(url) => apiRequest<T>(url),
  post: <T>(url, body) => apiRequest<T>(url, { method: "POST", ... }),
  patch: <T>(url, body) => ...,
  delete: <T>(url) => ...,
};

// ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
class ApiError extends Error { status: number; }
```

**ç‰¹å¾´**:
- Generic å‹å®‰å…¨æ€§
- JSON è‡ªå‹•ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºãƒ»ãƒ‡ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚º
- ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ 204 No Content å¯¾å¿œ
- ã‚¨ãƒ©ãƒ¼æ™‚ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æŠ½å‡º

---

## 4. UI/UX ãƒ‘ã‚¿ãƒ¼ãƒ³

### 4.1 ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚° & æ¤œç´¢

**å®Ÿè£…å ´æ‰€**: `/videos` ãƒšãƒ¼ã‚¸

| æ©Ÿèƒ½ | ã‚¿ã‚¤ãƒ— | å‹•ä½œ |
|------|--------|------|
| **ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¤œç´¢** | ãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ› | 300ms ãƒ‡ãƒã‚¦ãƒ³ã‚¹ â†’ API å†ã‚¯ã‚¨ãƒª |
| **ãƒ¬ãƒ™ãƒ«** | ãƒ©ã‚¸ã‚ªãƒœã‚¿ãƒ³ | å˜ä¸€é¸æŠï¼ˆã™ã¹ã¦/è¶…å…¥é–€/åˆç´šï¼‰ |
| **å†ç”Ÿæ™‚é–“** | ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ | è¤‡æ•°é¸æŠï¼ˆ10åˆ†ä»¥å†…/10-30åˆ†/30åˆ†ä»¥ä¸Šï¼‰ |
| **è¨€èª** | ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ | è¤‡æ•°é¸æŠï¼ˆæ—¥æœ¬èª/Englishï¼‰ |
| **ãƒ†ãƒ¼ãƒï¼ˆã‚¿ã‚°ï¼‰** | ãƒ”ãƒ«å‹ãƒœã‚¿ãƒ³ | è¤‡æ•°é¸æŠã€DB ã‹ã‚‰å‹•çš„å–å¾— |
| **ã‚½ãƒ¼ãƒˆ** | ã‚»ãƒ¬ã‚¯ãƒˆ | BCIé †/æ–°ã—ã„é †/äººæ°—é †/ãŠã™ã™ã‚é † |

**ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ**:
- ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—: å·¦ã‚µã‚¤ãƒ‰ãƒãƒ¼å¸¸æ™‚è¡¨ç¤º
- ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆ/ãƒ¢ãƒã‚¤ãƒ«: ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼ â†’ ã‚¹ãƒ©ã‚¤ãƒ‰ã‚ªãƒ¼ãƒãƒ¼ï¼ˆz-50ï¼‰

### 4.2 ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³

**å®Ÿè£…**: `/videos` ãƒšãƒ¼ã‚¸

```typescript
const totalPages = Math.ceil(totalCount / limit);
// UI: [å‰ã¸] {page}/{totalPages} [æ¬¡ã¸]
// ç„¡åŠ¹åŒ–: page <= 1 or page >= totalPages
```

**ç‰¹å¾´**: ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã§ç®¡ç†ã€URL ã« `?page=N` åŒæœŸ

### 4.3 ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ã‚°ãƒªãƒƒãƒ‰

| ãƒ–ãƒ¬ãƒ¼ã‚¯ãƒã‚¤ãƒ³ãƒˆ | å‹•ç”»ã‚°ãƒªãƒƒãƒ‰ | ãƒ‘ã‚¹ã‚°ãƒªãƒƒãƒ‰ |
|------------------|-------------|------------|
| ãƒ¢ãƒã‚¤ãƒ« | grid-cols-1 | grid-cols-1 |
| ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆ (sm) | sm:grid-cols-2 | sm:grid-cols-2 |
| ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ— (lg) | lg:grid-cols-3/4 | lg:grid-cols-3 |

**ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°**: Tailwind CSS (globals.css ã§ ã‚«ã‚¹ã‚¿ãƒ ã‚«ãƒ©ãƒ¼å®šç¾©)

### 4.4 ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚° & ã‚¹ã‚±ãƒ«ãƒˆãƒ³

- **ãƒšãƒ¼ã‚¸ãƒ¬ãƒ™ãƒ«**: `loading.tsx` (Suspense ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯)
- **ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ¬ãƒ™ãƒ«**: animate-pulse (skeleton UI)
- **ç®¡ç†ç”»é¢**: å‹•çš„ã‚¤ãƒ³ãƒãƒ¼ãƒˆã§ `<TabLoader />` (Loader2 icon)

### 4.5 å‹•ä½œç¢ºèªã¨ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³

| å ´é¢ | UI |
|------|-----|
| ãƒ‡ãƒ¼ã‚¿é€ä¿¡ä¸­ | ãƒœã‚¿ãƒ³ disabled + loading spinner |
| å‰Šé™¤ç¢ºèª | ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ "å‰Šé™¤ï¼Ÿ" + ç¢ºèª/ã‚­ãƒ£ãƒ³ã‚»ãƒ« |
| ã‚¨ãƒ©ãƒ¼ | react-hot-toast (å³ä¸Š 3ç§’) |
| æˆåŠŸ | react-hot-toast ç·‘è‰² |

---

## 5. èªè¨¼é–¢é€£UI & æ¨©é™è¡¨ç¤º

### 5.1 èªè¨¼ãƒ•ãƒ­ãƒ¼

```
æœªèªè¨¼ â†’ /auth/signin â†’ Google or ãƒ‡ãƒ¢èªè¨¼ â†’ /
â””â”€ Header ã« "ãƒ­ã‚°ã‚¤ãƒ³" ãƒœã‚¿ãƒ³è¡¨ç¤º

èªè¨¼æ¸ˆã¿ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼‰â†’ Header ã«åå‰ + "ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ"

èªè¨¼æ¸ˆã¿ï¼ˆadminï¼‰â†’ Header ã« + "ç®¡ç†" ãƒªãƒ³ã‚¯ + ç®¡ç†ç”»é¢ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹
```

### 5.2 ãƒ­ã‚°ã‚¤ãƒ³ãƒšãƒ¼ã‚¸ (`/auth/signin`)

**UIè¦ç´ **:
1. **Google ãƒ­ã‚°ã‚¤ãƒ³**: å…¬å¼ SVG ã‚¢ã‚¤ã‚³ãƒ³ã€signIn("google")
2. **ãƒ‡ãƒ¢ãƒ­ã‚°ã‚¤ãƒ³**: 
   - ãƒ‡ãƒ¢ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼ˆãƒ­ãƒ¼ãƒ«: userï¼‰
   - ç®¡ç†è€…ï¼ˆãƒ­ãƒ¼ãƒ«: adminï¼‰
3. **Divider**: "ã¾ãŸã¯" ãƒ†ã‚­ã‚¹ãƒˆä»˜ã

### 5.3 æ¨©é™ã«å¿œã˜ãŸè¡¨ç¤ºåˆ‡æ›¿

**Header (src/components/layout/Header.tsx)**:
```typescript
const isAdmin = session?.user?.role === "admin";

// Desktop nav
{isAdmin && <Link href="/admin">ç®¡ç†</Link>}

// Mobile nav (åŒã˜ãƒ­ã‚¸ãƒƒã‚¯)
```

**Admin ãƒšãƒ¼ã‚¸ (src/app/admin/page.tsx)**:
```typescript
if (status === "loading") return <Loader2 />;
if (!session || session.user?.role !== "admin") 
  return <AccessDenied />;

// 7ã¤ã®ã‚¿ãƒ–ã‚’æ¡ä»¶ãªãè¡¨ç¤ºï¼ˆadmin ã®ã¿åˆ°é”å¯èƒ½ï¼‰
```

### 5.4 ã‚»ãƒƒã‚·ãƒ§ãƒ³æƒ…å ±ã®ä¿æŒ

- **ãƒ—ãƒ­ãƒã‚¤ãƒ€**: SessionProvider (layout.tsx)
- **ãƒ•ãƒƒã‚¯**: useSession() ã§å…¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‹ã‚‰ access
- **æƒ…å ±**: { user: { name, email, image, role }, ... }

---

## 6. ç®¡ç†ç”»é¢ (`/admin`)

### 6.1 ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰æ§‹æˆ

**7ã¤ã®ã‚¿ãƒ–å¼UI**:

| ã‚¿ãƒ– | ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ | æ©Ÿèƒ½ |
|------|----------------|------|
| 1. **å‹•ç”»ç®¡ç†** | VideoTable | æ¤œç´¢ãƒ»ç·¨é›†ãƒ»å‰Šé™¤ãƒ»å…¬é–‹åˆ‡æ›¿ãƒ»è¦ç´„å®Ÿè¡Œ |
| 2. **ã‚¤ãƒ³ãƒãƒ¼ãƒˆ** | ImportForm | URL â†’ ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿å–å¾— â†’ DBè¿½åŠ  |
| 3. **BCIè¨­å®š** | BCISettings | ã‚¹ã‚³ã‚¢è¨ˆç®—ã‚¦ã‚§ã‚¤ãƒˆèª¿æ•´ |
| 4. **ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯** | FeedbackList | ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯è¡¨ç¤º |
| 5. **ãƒˆãƒ©ãƒƒã‚¯ç®¡ç†** | PathManager | ãƒˆãƒ©ãƒƒã‚¯ CRUDã€ã‚¹ãƒ†ãƒƒãƒ—é †åºç®¡ç† |
| 6. **è¦ç´„è¨­å®š** | SummarizerSettings | AIè¦ç´„ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿èª¿æ•´ |
| 7. **ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†** | UserManager | ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€è¦§ãƒ»æ¨©é™ç®¡ç† |

### 6.2 ã‚¿ãƒ–ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³

**ç‰¹å¾´**:
- ARIA role="tablist", role="tab" (a11y å¯¾å¿œ)
- ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰: ArrowRight/ArrowLeft ã§ã‚¿ãƒ–åˆ‡æ›¿
- å‹•çš„ã‚¤ãƒ³ãƒãƒ¼ãƒˆ: `dynamic(import(...), { loading: <TabLoader /> })`
- ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ç®¡ç†: tabRefs ã§ focus() åˆ¶å¾¡

### 6.3 VideoTable è©³ç´°

```typescript
// æ¤œç´¢ãƒ»ãƒ•ã‚£ãƒ«ã‚¿
<input placeholder="ã‚¿ã‚¤ãƒˆãƒ«ãƒ»ãƒãƒ£ãƒ³ãƒãƒ«ãƒ»ã‚¿ã‚°ã§æ¤œç´¢" />

// ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ç·¨é›†
click Edit â†’ title/tags ã‚’ input ã«å¤‰æ›´ â†’ Save/Cancel

// ã‚¢ã‚¯ã‚·ãƒ§ãƒ³
- å…¬é–‹/éå…¬é–‹: Eye/EyeOff ã‚¢ã‚¤ã‚³ãƒ³
- ç·¨é›†: Pencil ã‚¢ã‚¤ã‚³ãƒ³
- å‰Šé™¤: Trash2 â†’ ç¢ºèª â†’ Delete

// è¦ç´„å®Ÿè¡Œ
<SummarizeButton videoId={id} />
```

### 6.4 ImportForm ãƒ•ãƒ­ãƒ¼

```
UrlInput
  â†“ (URL å…¥åŠ›)
Fetch Metadata (API: /api/admin/youtube-lookup)
  â†“
MetaPreview (ç”»åƒãƒ»ã‚¿ã‚¤ãƒˆãƒ«ãƒ»èª¬æ˜)
  â†“ (Quick Add ãƒœã‚¿ãƒ³)
API POST /api/import
  â†“
Result: "ä½œæˆ: Nä»¶ / æ›´æ–°: Mä»¶"
```

---

## 7. çŠ¶æ…‹ç®¡ç†ãƒ‘ã‚¿ãƒ¼ãƒ³

### 7.1 ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆçŠ¶æ…‹

#### ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ãƒšãƒ¼ã‚¸ (`/videos`)
```typescript
const [level, setLevel] = useState("");
const [durations, setDurations] = useState<string[]>([]);
const [languages, setLanguages] = useState<string[]>([]);
const [selectedTags, setSelectedTags] = useState<string[]>([]);
const [sort, setSort] = useState("bci");
const [query, setQuery] = useState("");
const [page, setPage] = useState(1);
const [videos, setVideos] = useState<Video[]>([]);
```

**çŠ¶æ…‹ â†’ URL**: `buildParams()` ã§ params ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆç”Ÿæˆ â†’ `router.replace()`

**URL â†’ çŠ¶æ…‹**: `useSearchParams()` ã§åˆæœŸå€¤ã‚»ãƒƒãƒˆ

**ãƒ‡ãƒã‚¦ãƒ³ã‚¹**: `query` â†’ `debouncedQuery` (300ms)

#### ç®¡ç†ç”»é¢
```typescript
const [tab, setTab] = useState<Tab>("videos");
const [videos, setVideos] = useState<Video[]>([]);
const [editingId, setEditingId] = useState<string | null>(null);
const [deletingId, setDeletingId] = useState<string | null>(null);
```

### 7.2 ã‚µãƒ¼ãƒãƒ¼çŠ¶æ…‹

- **Prisma ã‚­ãƒ£ãƒƒã‚·ãƒ¥**: Server Component å†…ã§ Prisma ç›´æ¥ä½¿ç”¨
- **Next.js ã‚­ãƒ£ãƒƒã‚·ãƒ¥**: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆæœ‰åŠ¹ã€`force-dynamic` ã§ç„¡åŠ¹åŒ–å¯èƒ½

---

## 8. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

### 8.1 ãƒ¡ãƒ¢åŒ–

```typescript
export const VideoCard = memo(function VideoCard({ video }) { ... });
export const PathCard = memo(function PathCard(...) { ... });
```

ç›®çš„: è¦ª re-render æ™‚ã«ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå†è¨ˆç®—ã‚¹ã‚­ãƒƒãƒ—

### 8.2 å‹•çš„ã‚¤ãƒ³ãƒãƒ¼ãƒˆ (Admin)

```typescript
const VideoTable = dynamic(
  () => import("@/components/admin/VideoTable")...,
  { loading: () => <TabLoader /> }
);
```

ç›®çš„: ç®¡ç†ç”»é¢ã«åˆ°é”ã—ãŸã¨ãã®ã¿ JavaScript ãƒãƒ³ãƒ‰ãƒ«èª­ã¿è¾¼ã¿

### 8.3 URL ãƒ™ãƒ¼ã‚¹ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°

ç›®çš„: ãƒ–ãƒ©ã‚¦ã‚¶æˆ»ã‚‹/é€²ã‚€ ã§çŠ¶æ…‹å¾©å…ƒã€ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯å¯¾å¿œ

---

## 9. ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ (A11y)

| è¦ç´  | å®Ÿè£… |
|------|------|
| **ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³** | role="navigation", aria-label |
| **ã‚¿ãƒ–UI** | role="tablist", role="tab", aria-selected |
| **ãƒ•ã‚©ãƒ¼ãƒ ** | aria-label on search input |
| **ã‚¨ãƒ©ãƒ¼/æˆåŠŸ** | react-hot-toast (ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ãƒªãƒ¼ãƒ€ãƒ¼å¯¾å¿œ) |
| **ãƒ¢ãƒã‚¤ãƒ«ãƒ¡ãƒ‹ãƒ¥ãƒ¼** | aria-label="ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’é–‹ã/é–‰ã˜ã‚‹" |

---

## 10. ä¸»è¦UIãƒ‘ã‚¿ãƒ¼ãƒ³é›†

### 10.1 ãƒœã‚¿ãƒ³ãƒãƒªã‚¨ãƒ¼ã‚·ãƒ§ãƒ³

```typescript
// Primary CTA
<a className="bg-primary-600 text-white px-6 py-3 rounded-lg">...</a>

// Secondary
<button className="border border-slate-200 rounded-lg">...</button>

// Icon button
<button className="p-1.5 text-slate-400 hover:bg-slate-100 rounded">...</button>

// State: disabled
<button disabled className="opacity-40">...</button>
```

### 10.2 ã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆ

```css
/* Primary */
--color-primary-600: #2563eb (Blue)

/* Semantic */
--color-green-600:  (Success)
--color-red-600:    (Danger)
--color-amber-600:  (Warning)
--color-blue-600:   (Info)
```

### 10.3 ã‚¹ãƒšãƒ¼ã‚·ãƒ³ã‚°

- åŸºæœ¬: 4px (Tailwind default)
- gap-3, gap-4 etc ã§çµ±ä¸€
- ã‚»ã‚¯ã‚·ãƒ§ãƒ³: py-8, py-12, py-16

---

## 11. ç™ºè¦‹ãƒ»æ¨å¥¨äº‹é …

### âœ… å¼·ã¿ãƒã‚¤ãƒ³ãƒˆ

1. **ãƒ¢ãƒã‚¤ãƒ«ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–**: å…¨ãƒšãƒ¼ã‚¸ã§ md/lg/xl ãƒ–ãƒ¬ãƒ¼ã‚¯ãƒã‚¤ãƒ³ãƒˆå¯¾å¿œ
2. **URLãƒ™ãƒ¼ã‚¹çŠ¶æ…‹ç®¡ç†**: ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ãƒ»å…±æœ‰ãƒ»å±¥æ­´å¾©å…ƒã‚’è‡ªå‹•ã‚µãƒãƒ¼ãƒˆ
3. **ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè¨­è¨ˆ**: ç²’åº¦ãŒè‰¯ãã€å†åˆ©ç”¨æ€§é«˜ã„
4. **ç®¡ç†ç”»é¢**: 7æ©Ÿèƒ½ã‚’ã‚¿ãƒ–ã§çµ±åˆã€UXå„ªè‰¯
5. **ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†**: Next-Auth + SessionProvider ã§çµ±ä¸€
6. **ã‚¨ãƒ©ãƒ¼UI**: react-hot-toast ã§çµ±ä¸€ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼

### ğŸŸ¡ æ”¹å–„ææ¡ˆ

1. **çŠ¶æ…‹ç®¡ç†ãƒ©ã‚¤ãƒ–ãƒ©ãƒªæ¤œè¨**: 
   - è¤‡é›‘ãªã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆçŠ¶æ…‹ãŒå¢—ãˆãŸå ´åˆã€Zustand/Jotai ã®å°å…¥ã‚’æ¤œè¨
   - ç¾åœ¨ã¯ useState ã§ååˆ†ã ãŒã€ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£ã®ãŸã‚

2. **TypeScript å‹å®šç¾©**: 
   - API ãƒ¬ã‚¹ãƒãƒ³ã‚¹å‹ã‚’é›†ç´„ç®¡ç† (types/api.ts ä½œæˆæ¨å¥¨)
   - ç¾åœ¨ã¯å„ãƒšãƒ¼ã‚¸ã§ inline å‹å®šç¾©

3. **ãƒ•ã‚©ãƒ¼ãƒ ç®¡ç†**:
   - React Hook Form + Zod ã®å°å…¥ã§ã€admin ãƒ•ã‚©ãƒ¼ãƒ ã‚’ã‚ˆã‚Šå …ç‰¢ã«

4. **ã‚­ãƒ£ãƒƒã‚·ãƒ³ã‚°æˆ¦ç•¥**:
   - SWR/React Query ã®å°å…¥ã§ã€ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ»å†ãƒ•ã‚§ãƒƒãƒãƒ»off-line support

5. **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–**:
   - Lighthouse CI ã‚’ CI/CD ã«çµ±åˆ

### ğŸ”´ æ½œåœ¨çš„ãªUXãƒªã‚¹ã‚¯

1. **ã‚­ãƒ£ãƒƒã‚·ãƒ¥å‹•ä½œã®æ›–æ˜§ã•**: 
   - `force-dynamic` ã§å‹•çš„ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°å¤šç”¨ â†’ ISR (Incremental Static Regeneration) æ¤œè¨

2. **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**:
   - APIã‚¨ãƒ©ãƒ¼æ™‚ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼é€šçŸ¥ãŒ toast ã®ã¿
   - é‡è¦ãªã‚¨ãƒ©ãƒ¼ã¯ãƒ¢ãƒ¼ãƒ€ãƒ«ãƒ»ãƒšãƒ¼ã‚¸ã‚¨ãƒ©ãƒ¼UI ã‚‚æ¤œè¨

3. **Admin ç”»é¢ã®ã‚¿ãƒ–çŠ¶æ…‹å¾©å…ƒ**:
   - URL ã« `?tab=xxx` åŒæœŸã—ã¦ã„ãªã„ â†’ ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯å¾Œã«æˆ»ã‚‹ã¨åˆæœŸã‚¿ãƒ–ã«æˆ»ã‚‹

---

## 12. æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯ï¼ˆãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ï¼‰

| å±¤ | æŠ€è¡“ |
|---|----|
| **ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯** | Next.js 14 (App Router) |
| **UIè¨€èª** | React 19 |
| **å‹ãƒã‚§ãƒƒã‚¯** | TypeScript |
| **ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°** | Tailwind CSS |
| **UI ãƒ©ã‚¤ãƒ–ãƒ©ãƒª** | lucide-react (icons), react-hot-toast |
| **èªè¨¼** | next-auth (NextAuth.js) |
| **DB ã‚¢ã‚¯ã‚»ã‚¹** | Prisma (ã‚µãƒ¼ãƒãƒ¼ã®ã¿) |
| **ãƒ†ã‚¹ãƒˆ** | (Vitest/Playwright E2E æº–å‚™ä¸­?) |

---

## ã¾ã¨ã‚

AIå­¦ç¿’ãƒŠãƒ“ã®ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã¯ã€**Next.js App Router ã‚’æ´»ç”¨ã—ãŸç¾ä»£çš„ãªãƒ•ãƒ«ã‚¹ã‚¿ãƒƒã‚¯ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£**ã§ã™ã€‚

**ä¸»ãªç‰¹å¾´**:
- âœ… Server/Client ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®é©åˆ‡ãªä½¿ã„åˆ†ã‘
- âœ… URL ãƒ™ãƒ¼ã‚¹çŠ¶æ…‹ç®¡ç†ã§ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£ç¢ºä¿
- âœ… ç®¡ç†ç”»é¢ã®çµ±ä¸€UIï¼ˆã‚¿ãƒ–ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰
- âœ… ãƒ¢ãƒã‚¤ãƒ«å„ªå…ˆãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³
- âœ… Next-Auth ã«ã‚ˆã‚‹èªè¨¼ãƒ»æ¨©é™ç®¡ç†

**ä»Šå¾Œã®æ‹¡å¼µæ€§**:
- å›½éš›åŒ– (i18n)
- ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰å¯¾å¿œ
- ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥
- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å”åƒç·¨é›† (ãƒˆãƒ©ãƒƒã‚¯ç®¡ç†)
- Analytics çµ±åˆ

